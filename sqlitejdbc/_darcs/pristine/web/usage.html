<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="/content.css" />
    <link rel="stylesheet" type="text/css" href="/javasource.css" />
    <title>SQLiteJDBC - Usage</title>
</head>
<body>
<div class="ad">
<script type="text/javascript"><!--
google_ad_client = "pub-3074710994457921";
google_ad_width = 120;
google_ad_height = 240;
google_ad_format = "120x240_as";
google_ad_type = "text";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>



<div class="content">
<h1>SQLiteJDBC</h1>

<p class="item">
    <a href="../">&#60;-</a> |
    <a href="index.html">SQLiteJDBC</a> |
    <a href="changes.html">Changelog</a> |
    <a href="usage.html">Usage</a> |
    <a href="speed.html">Speed</a> |
    <a href="functions.html">Custom Functions</a> |
    <a href="api/">Javadoc</a>
</p>

<h2>Usage</h2>

<p>Download the binary for the platform you are developing on. Open the
tarball and copy the two files into your application directory:</p>
<pre>
    sqlitejdbc.jar
    sqlitejdbc.dll (or libsqlitejdbc.so or libsqlitejdbc.jnilib)
</pre>

<p>Reference the driver in your code:</p>
<pre class="code" id="Classes">
    Class.forName(<font id="StringLiteral">"org.sqlite.JDBC"</font>);
    Connection conn = DriverManager.getConnection(<font id="StringLiteral">"jdbc:sqlite:filename"</font>);
    <font id="SingleLineComment">// ... use the database ...</font>
    conn.close();
</pre>

<p>And call your program with the driver's JAR file in the classpath
and the C library in the librarypath. E.g.</p>
<pre>
    java -cp sqlitejdbc.jar -Djava.library.path=. yourclass
</pre>

<p>That's it.</p>

<h3>Dates and Time</h3>

<p>SQLiteJDBC implements <tt>ResultSet.getDate()/getTime()</tt> and
<tt>PreparedStatement.setDate()/setTime()</tt> in the only efficient
way the JDBC spec allows for, which is storing the time as a 64-bit
long of milliseconds since UTC. This is the standard unix timestamp.</p>

<p>This does not conflict with the SQLite
<a href="http://www.sqlite.org/cvstrac/wiki?p=DateAndTimeFunctions"> standard
format</a> as long as care is taken to transform the unix timestamp
into what SQLite functions use, either at the point where the date is
stored or when using it elsewhere in SQLite. For example:</p>

<pre class="code" id="Classes">
    prep = conn.prepareStatement(<font id="StringLiteral">"insert into test values (?);"</font>);
    prep.setDate(<font id="IntegerLiteral">1</font>, <font id="New">new</font> Date(<font id="IntegerLiteral">1000</font>));
    prep.executeUpdate();

    rs = stat.executeQuery(<font id="StringLiteral">"select * from test;"</font>);
    rs.getString(<font id="IntegerLiteral">1</font>) == <font id="StringLiteral">"1000"</font>;
</pre>

In the above example the date is being stored as a unix timestamp.
To store the date in the standard SQLite format, transform it with
the <tt>datetime()</tt> and <tt>strftime()</tt> functions:

<pre class="code" id="Classes">
    prep = conn.prepareStatement(
        <font id="StringLiteral">"insert into test values datetime(? / 1000, 'unixepoch');"</font>);
    prep.setDate(<font id="IntegerLiteral">1</font>, <font id="New">new</font> Date(<font id="IntegerLiteral">1092941466000</font>));
    prep.executeUpdate();

    rs = stat.executeQuery(<font id="StringLiteral">"select * from test;"</font>);
    assert(rs.getString(<font id="IntegerLiteral">1</font>).equals(<font id="StringLiteral">"2004-08-10 18:51:06"</font>));

    rs = stat.executeQuery(<font id="StringLiteral">"select strftime('%s', col1) * 1000 from test;"</font>);
    assert(rs.getDate(<font id="IntegerLiteral">1</font>).equals(<font id="New">new</font> Date(<font id="IntegerLiteral">987654321</font>)));
</pre>



<h2>Compiling</h2>

<p>Download the source tarball, extract, set your <tt>$JAVA_HOME</tt>
env variable and type:</p>
<pre>
    $ make
</pre>
<p>See the <a href="src/README">README</a> for more details.</p>

</div>
<p class="sig">2006-09-26</p>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
    _uacct = "UA-2989140-1";
    urchinTracker();
</script>
</body>
</html>
